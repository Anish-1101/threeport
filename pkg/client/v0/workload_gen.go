// generated by 'threeport-codegen api-model' - do not edit

package v0

import (
	"bytes"
	"encoding/json"
	"errors"
	"fmt"
	v0 "github.com/threeport/threeport/pkg/api/v0"
	client "github.com/threeport/threeport/pkg/client"
	"net/http"
)

// GetWorkloadDefinitionByID feteches a workload definition by ID
func GetWorkloadDefinitionByID(id uint, apiAddr, apiToken string) (*v0.WorkloadDefinition, error) {
	var workloadDefinition v0.WorkloadDefinition

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-definitions/%d", apiAddr, ApiVersion, id),
		apiToken,
		http.MethodGet,
		new(bytes.Buffer),
		http.StatusOK,
	)
	if err != nil {
		return &workloadDefinition, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return &workloadDefinition, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadDefinition); err != nil {
		return &workloadDefinition, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return &workloadDefinition, nil
}

// GetWorkloadDefinitionByName feteches a workload definition by name
func GetWorkloadDefinitionByName(name, apiAddr, apiToken string) (*v0.WorkloadDefinition, error) {
	var workloadDefinitions []v0.WorkloadDefinition

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-definitions?name=%s", apiAddr, ApiVersion, name),
		apiToken,
		http.MethodGet,
		new(bytes.Buffer),
		http.StatusOK,
	)
	if err != nil {
		return &v0.WorkloadDefinition{}, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data)
	if err != nil {
		return &v0.WorkloadDefinition{}, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadDefinitions); err != nil {
		return &v0.WorkloadDefinition{}, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	switch {
	case len(workloadDefinitions) < 1:
		return &v0.WorkloadDefinition{}, errors.New(fmt.Sprintf("no workload definitions with name %s", name))
	case len(workloadDefinitions) > 1:
		return &v0.WorkloadDefinition{}, errors.New(fmt.Sprintf("more than one workload definition with name %s returned", name))
	}

	return &workloadDefinitions[0], nil
}

// CreateWorkloadDefinition creates a new workload definition
func CreateWorkloadDefinition(workloadDefinition *v0.WorkloadDefinition, apiAddr, apiToken string) (*v0.WorkloadDefinition, error) {
	jsonWorkloadDefinition, err := client.MarshalObject(workloadDefinition)
	if err != nil {
		return workloadDefinition, fmt.Errorf("failed to marshal provided object to JSON: %w", err)
	}

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-definitions", apiAddr, ApiVersion),
		apiToken,
		http.MethodPost,
		bytes.NewBuffer(jsonWorkloadDefinition),
		http.StatusCreated,
	)
	if err != nil {
		return workloadDefinition, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return workloadDefinition, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadDefinition); err != nil {
		return workloadDefinition, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return workloadDefinition, nil
}

// UpdateWorkloadDefinition updates a workload definition
func UpdateWorkloadDefinition(workloadDefinition *v0.WorkloadDefinition, apiAddr, apiToken string) (*v0.WorkloadDefinition, error) {
	jsonWorkloadDefinition, err := client.MarshalObject(workloadDefinition)
	if err != nil {
		return workloadDefinition, fmt.Errorf("failed to marshal provided object to JSON: %w", err)
	}

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-definitions/%d", apiAddr, ApiVersion, *workloadDefinition.ID),
		apiToken,
		http.MethodPatch,
		bytes.NewBuffer(jsonWorkloadDefinition),
		http.StatusOK,
	)
	if err != nil {
		return workloadDefinition, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return workloadDefinition, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadDefinition); err != nil {
		return workloadDefinition, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return workloadDefinition, nil
}

// GetWorkloadResourceDefinitionByID feteches a workload resource definition by ID
func GetWorkloadResourceDefinitionByID(id uint, apiAddr, apiToken string) (*v0.WorkloadResourceDefinition, error) {
	var workloadResourceDefinition v0.WorkloadResourceDefinition

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-resource-definitions/%d", apiAddr, ApiVersion, id),
		apiToken,
		http.MethodGet,
		new(bytes.Buffer),
		http.StatusOK,
	)
	if err != nil {
		return &workloadResourceDefinition, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return &workloadResourceDefinition, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadResourceDefinition); err != nil {
		return &workloadResourceDefinition, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return &workloadResourceDefinition, nil
}

// GetWorkloadResourceDefinitionByName feteches a workload resource definition by name
func GetWorkloadResourceDefinitionByName(name, apiAddr, apiToken string) (*v0.WorkloadResourceDefinition, error) {
	var workloadResourceDefinitions []v0.WorkloadResourceDefinition

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-resource-definitions?name=%s", apiAddr, ApiVersion, name),
		apiToken,
		http.MethodGet,
		new(bytes.Buffer),
		http.StatusOK,
	)
	if err != nil {
		return &v0.WorkloadResourceDefinition{}, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data)
	if err != nil {
		return &v0.WorkloadResourceDefinition{}, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadResourceDefinitions); err != nil {
		return &v0.WorkloadResourceDefinition{}, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	switch {
	case len(workloadResourceDefinitions) < 1:
		return &v0.WorkloadResourceDefinition{}, errors.New(fmt.Sprintf("no workload definitions with name %s", name))
	case len(workloadResourceDefinitions) > 1:
		return &v0.WorkloadResourceDefinition{}, errors.New(fmt.Sprintf("more than one workload definition with name %s returned", name))
	}

	return &workloadResourceDefinitions[0], nil
}

// CreateWorkloadResourceDefinition creates a new workload resource definition
func CreateWorkloadResourceDefinition(workloadResourceDefinition *v0.WorkloadResourceDefinition, apiAddr, apiToken string) (*v0.WorkloadResourceDefinition, error) {
	jsonWorkloadResourceDefinition, err := client.MarshalObject(workloadResourceDefinition)
	if err != nil {
		return workloadResourceDefinition, fmt.Errorf("failed to marshal provided object to JSON: %w", err)
	}

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-resource-definitions", apiAddr, ApiVersion),
		apiToken,
		http.MethodPost,
		bytes.NewBuffer(jsonWorkloadResourceDefinition),
		http.StatusCreated,
	)
	if err != nil {
		return workloadResourceDefinition, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return workloadResourceDefinition, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadResourceDefinition); err != nil {
		return workloadResourceDefinition, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return workloadResourceDefinition, nil
}

// UpdateWorkloadResourceDefinition updates a workload resource definition
func UpdateWorkloadResourceDefinition(workloadResourceDefinition *v0.WorkloadResourceDefinition, apiAddr, apiToken string) (*v0.WorkloadResourceDefinition, error) {
	jsonWorkloadResourceDefinition, err := client.MarshalObject(workloadResourceDefinition)
	if err != nil {
		return workloadResourceDefinition, fmt.Errorf("failed to marshal provided object to JSON: %w", err)
	}

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-resource-definitions/%d", apiAddr, ApiVersion, *workloadResourceDefinition.ID),
		apiToken,
		http.MethodPatch,
		bytes.NewBuffer(jsonWorkloadResourceDefinition),
		http.StatusOK,
	)
	if err != nil {
		return workloadResourceDefinition, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return workloadResourceDefinition, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadResourceDefinition); err != nil {
		return workloadResourceDefinition, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return workloadResourceDefinition, nil
}

// GetWorkloadInstanceByID feteches a workload instance by ID
func GetWorkloadInstanceByID(id uint, apiAddr, apiToken string) (*v0.WorkloadInstance, error) {
	var workloadInstance v0.WorkloadInstance

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-instances/%d", apiAddr, ApiVersion, id),
		apiToken,
		http.MethodGet,
		new(bytes.Buffer),
		http.StatusOK,
	)
	if err != nil {
		return &workloadInstance, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return &workloadInstance, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadInstance); err != nil {
		return &workloadInstance, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return &workloadInstance, nil
}

// GetWorkloadInstanceByName feteches a workload instance by name
func GetWorkloadInstanceByName(name, apiAddr, apiToken string) (*v0.WorkloadInstance, error) {
	var workloadInstances []v0.WorkloadInstance

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-instances?name=%s", apiAddr, ApiVersion, name),
		apiToken,
		http.MethodGet,
		new(bytes.Buffer),
		http.StatusOK,
	)
	if err != nil {
		return &v0.WorkloadInstance{}, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data)
	if err != nil {
		return &v0.WorkloadInstance{}, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadInstances); err != nil {
		return &v0.WorkloadInstance{}, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	switch {
	case len(workloadInstances) < 1:
		return &v0.WorkloadInstance{}, errors.New(fmt.Sprintf("no workload definitions with name %s", name))
	case len(workloadInstances) > 1:
		return &v0.WorkloadInstance{}, errors.New(fmt.Sprintf("more than one workload definition with name %s returned", name))
	}

	return &workloadInstances[0], nil
}

// CreateWorkloadInstance creates a new workload instance
func CreateWorkloadInstance(workloadInstance *v0.WorkloadInstance, apiAddr, apiToken string) (*v0.WorkloadInstance, error) {
	jsonWorkloadInstance, err := client.MarshalObject(workloadInstance)
	if err != nil {
		return workloadInstance, fmt.Errorf("failed to marshal provided object to JSON: %w", err)
	}

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-instances", apiAddr, ApiVersion),
		apiToken,
		http.MethodPost,
		bytes.NewBuffer(jsonWorkloadInstance),
		http.StatusCreated,
	)
	if err != nil {
		return workloadInstance, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return workloadInstance, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadInstance); err != nil {
		return workloadInstance, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return workloadInstance, nil
}

// UpdateWorkloadInstance updates a workload instance
func UpdateWorkloadInstance(workloadInstance *v0.WorkloadInstance, apiAddr, apiToken string) (*v0.WorkloadInstance, error) {
	jsonWorkloadInstance, err := client.MarshalObject(workloadInstance)
	if err != nil {
		return workloadInstance, fmt.Errorf("failed to marshal provided object to JSON: %w", err)
	}

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-instances/%d", apiAddr, ApiVersion, *workloadInstance.ID),
		apiToken,
		http.MethodPatch,
		bytes.NewBuffer(jsonWorkloadInstance),
		http.StatusOK,
	)
	if err != nil {
		return workloadInstance, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return workloadInstance, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadInstance); err != nil {
		return workloadInstance, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return workloadInstance, nil
}

// GetWorkloadResourceInstanceByID feteches a workload resource instance by ID
func GetWorkloadResourceInstanceByID(id uint, apiAddr, apiToken string) (*v0.WorkloadResourceInstance, error) {
	var workloadResourceInstance v0.WorkloadResourceInstance

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-resource-instances/%d", apiAddr, ApiVersion, id),
		apiToken,
		http.MethodGet,
		new(bytes.Buffer),
		http.StatusOK,
	)
	if err != nil {
		return &workloadResourceInstance, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return &workloadResourceInstance, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadResourceInstance); err != nil {
		return &workloadResourceInstance, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return &workloadResourceInstance, nil
}

// GetWorkloadResourceInstanceByName feteches a workload resource instance by name
func GetWorkloadResourceInstanceByName(name, apiAddr, apiToken string) (*v0.WorkloadResourceInstance, error) {
	var workloadResourceInstances []v0.WorkloadResourceInstance

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-resource-instances?name=%s", apiAddr, ApiVersion, name),
		apiToken,
		http.MethodGet,
		new(bytes.Buffer),
		http.StatusOK,
	)
	if err != nil {
		return &v0.WorkloadResourceInstance{}, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data)
	if err != nil {
		return &v0.WorkloadResourceInstance{}, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadResourceInstances); err != nil {
		return &v0.WorkloadResourceInstance{}, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	switch {
	case len(workloadResourceInstances) < 1:
		return &v0.WorkloadResourceInstance{}, errors.New(fmt.Sprintf("no workload definitions with name %s", name))
	case len(workloadResourceInstances) > 1:
		return &v0.WorkloadResourceInstance{}, errors.New(fmt.Sprintf("more than one workload definition with name %s returned", name))
	}

	return &workloadResourceInstances[0], nil
}

// CreateWorkloadResourceInstance creates a new workload resource instance
func CreateWorkloadResourceInstance(workloadResourceInstance *v0.WorkloadResourceInstance, apiAddr, apiToken string) (*v0.WorkloadResourceInstance, error) {
	jsonWorkloadResourceInstance, err := client.MarshalObject(workloadResourceInstance)
	if err != nil {
		return workloadResourceInstance, fmt.Errorf("failed to marshal provided object to JSON: %w", err)
	}

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-resource-instances", apiAddr, ApiVersion),
		apiToken,
		http.MethodPost,
		bytes.NewBuffer(jsonWorkloadResourceInstance),
		http.StatusCreated,
	)
	if err != nil {
		return workloadResourceInstance, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return workloadResourceInstance, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadResourceInstance); err != nil {
		return workloadResourceInstance, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return workloadResourceInstance, nil
}

// UpdateWorkloadResourceInstance updates a workload resource instance
func UpdateWorkloadResourceInstance(workloadResourceInstance *v0.WorkloadResourceInstance, apiAddr, apiToken string) (*v0.WorkloadResourceInstance, error) {
	jsonWorkloadResourceInstance, err := client.MarshalObject(workloadResourceInstance)
	if err != nil {
		return workloadResourceInstance, fmt.Errorf("failed to marshal provided object to JSON: %w", err)
	}

	response, err := GetResponse(
		fmt.Sprintf("%s/%s/workload-resource-instances/%d", apiAddr, ApiVersion, *workloadResourceInstance.ID),
		apiToken,
		http.MethodPatch,
		bytes.NewBuffer(jsonWorkloadResourceInstance),
		http.StatusOK,
	)
	if err != nil {
		return workloadResourceInstance, fmt.Errorf("call to threeport API returned unexpected response: %w", err)
	}

	jsonData, err := json.Marshal(response.Data[0])
	if err != nil {
		return workloadResourceInstance, fmt.Errorf("failed to marshal response data from threeport API: %w", err)
	}

	if err = json.Unmarshal(jsonData, &workloadResourceInstance); err != nil {
		return workloadResourceInstance, fmt.Errorf("failed unmarshal object from threeport response data: %w", err)
	}

	return workloadResourceInstance, nil
}
